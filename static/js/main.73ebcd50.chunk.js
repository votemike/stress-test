(this["webpackJsonpstress-test"]=this["webpackJsonpstress-test"]||[]).push([[0],{14:function(e,t,a){e.exports=a(21)},19:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),l=a.n(o),s=(a(19),a(10)),c=a(8),i=(a(20),a(1)),u=a(2),h=a(5),m=a(3),p=a(4),f=function(e,t){return e.finances[0].calculateMonthlyCostOfFinance(t).toFixed(2)},y=function(e,t){var a=e.calculateMonthlyIncome()-f(e,t);return e.payments[0]?+(a-e.payments[0].monthlyCost).toFixed(2):+a.toFixed(2)},d=new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}),g=function(e){return d.format(e)},v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state={collapsed:!0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"collapsable"},r.a.createElement("h2",{className:"collapsable-toggle title is-3",onClick:function(){return e.setState((function(e){return{collapsed:!e.collapsed}}))}},this.props.heading),r.a.createElement("div",{className:"collapsable-key-info collapsable-toggle",onClick:function(){return e.setState((function(e){return{collapsed:!e.collapsed}}))}},this.renderKeyInfoItems()),this.renderBlurb())}},{key:"renderBlurb",value:function(){if(!this.state.collapsed)return this.props.children}},{key:"renderKeyInfoItems",value:function(){var e=this;return Object.entries(this.props.keyInfoItems).map((function(t){var a=Object(c.a)(t,2),n=a[0],o=a[1];return r.a.createElement("div",{key:"".concat(e.props.heading,"-").concat(n)},r.a.createElement("span",{className:"collapsable-key-info-label"},n,":")," ",o)}))}}]),t}(r.a.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"renderBlurb",value:function(){var e=["The mortgage for ".concat(this.props.property.name," currently costs around ").concat(g(this.props.property.calculateMonthlyCost(!0))," each month.")],t=["After mortgage repayments, your current income from the property is around ".concat(g(this.props.property.calculateMonthlyIncome())," each month.")];this.props.property.finances[0].teaserRate&&(e.push("When the teaser rate expires, it is expected that this will rise to ".concat(g(this.props.property.calculateMonthlyCost()),", ").concat(g(this.props.property.calculateMonthlyCost()-this.props.property.calculateMonthlyCost())," more than your current repayments.")),t.push("When the teaser rate expires that will be nearer to ".concat(g(this.props.property.calculateMonthlyProfit()),".")));var a=r.a.createElement("p",{className:"summary-line"},e.join(" "),r.a.createElement("br",null),t.join(" "));if(this.props.property.finances[0].rate>=15)return a;var n=null;this.props.property.finances[0].rate<10&&(n=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"If interest rates were to rise to 10% (",r.a.createElement("a",{href:"https://www.purecommercialfinance.co.uk/news/a-brief-history-of-average-mortgage-interest-rates/",target:"_blank",rel:"noopener noreferrer"},"similar to rates around 1995"),"), then the mortgage would cost ",g(f(this.props.property,10))," each month, ",g(f(this.props.property,10)-this.props.property.calculateMonthlyCost(!0))," more that your current repayments. If rates were this high, your monthly income will be nearer to ",g(y(this.props.property,10)),"."),r.a.createElement("br",null)));var o=r.a.createElement("span",null,"If interest rates were to rise to 15% (",r.a.createElement("a",{href:"https://www.purecommercialfinance.co.uk/news/a-brief-history-of-average-mortgage-interest-rates/",target:"_blank",rel:"noopener noreferrer"},"similar to rates around 1980"),"), then the mortgage would cost ",g(f(this.props.property,15))," each month, ",g(f(this.props.property,15)-this.props.property.calculateMonthlyCost(!0))," more that your current repayments. If rates were this high, your monthly income will be nearer to ",g(y(this.props.property,15)),"."),l=r.a.createElement("p",{className:"summary-line"},n,o);return r.a.createElement(r.a.Fragment,null,a,l)}},{key:"renderDeleteButton",value:function(){var e=this;return r.a.createElement("button",{className:"remove-property",onClick:function(){return e.props.removePropertyHandler(e.props.index)}},"Remove Property")}},{key:"render",value:function(){var e=g(this.props.property.finances[0].monthlyTeaserCostOfFinance),t=g(this.props.property.calculateMonthlyProfit(!0));this.props.property.finances[0].teaserRate&&(e="".concat(e," (").concat(g(this.props.property.finances[0].monthlyCostOfFinance),")"),t="".concat(t," (").concat(g(this.props.property.calculateMonthlyProfit()),")"));var a={"Mortgage Cost":"".concat(e," per month"),Income:"".concat(g(this.props.property.calculateMonthlyIncome())," per month"),"Post-Mortgage Profit":"".concat(t," per month")};return r.a.createElement(v,{heading:this.props.property.name,keyInfoItems:a},this.renderBlurb(),this.renderDeleteButton())}}]),t}(r.a.Component),E=function(e){var t=e.properties,a=e.removePropertyHandler;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(b,{key:e.name,index:t,property:e,removePropertyHandler:a})})))},O=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getPropertyCurrentTotal",value:function(){var e=0;return this.props.properties.forEach((function(t){e+=t.finances[0].monthlyTeaserCostOfFinance})),e}},{key:"getPropertyFullTotal",value:function(){var e=0;return this.props.properties.forEach((function(t){e+=t.finances[0].monthlyCostOfFinance})),e}},{key:"getPropertyTotal",value:function(e){var t=0;return this.props.properties.forEach((function(a){t+=parseFloat(f(a,e))})),t}},{key:"getNetIncomeTotal",value:function(e){var t=0;return this.props.properties.forEach((function(a){t+=y(a,e)})),t}},{key:"getPropertyCurrentIncome",value:function(){var e=0;return this.props.properties.forEach((function(t){e+=t.calculateMonthlyProfit(!0)})),e}},{key:"getPropertyProperIncome",value:function(){var e=0;return this.props.properties.forEach((function(t){e+=t.calculateMonthlyProfit()})),e}},{key:"getTotalMortgageDebt",value:function(){return this.props.properties.reduce((function(e,t){return t.finances[0].amount+e}),0)}},{key:"renderBlurb",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Your current monthly payments are around ",g(this.getPropertyCurrentTotal()),". This will increase to around ",g(this.getPropertyFullTotal())," (",r.a.createElement("span",{className:"text-warning"},"+",g(this.getPropertyFullTotal()-this.getPropertyCurrentTotal())),") once any/all teaser rates have expired.",r.a.createElement("br",null),"Your monthly net income is around ",g(this.getPropertyCurrentIncome()),". This will change by ",g(this.getPropertyProperIncome()-this.getPropertyCurrentIncome())," to around ",g(this.getPropertyProperIncome())," once any/all teaser rates have expired."),r.a.createElement("p",null,r.a.createElement("span",null,"If interest rates were to rise to 10%: (",r.a.createElement("a",{href:"https://www.purecommercialfinance.co.uk/news/a-brief-history-of-average-mortgage-interest-rates/",target:"_blank",rel:"noopener noreferrer"},"similar to rates around 1995"),"), then the mortgages would total ",g(this.getPropertyTotal(10))," each month, ",g(this.getPropertyTotal(10)-this.getPropertyCurrentTotal())," more that your current repayments. If rates were this high, your monthly income will be nearer to ",g(this.getNetIncomeTotal(10)),"."),r.a.createElement("br",null),r.a.createElement("span",null,"If interest rates were to rise to 15%: (",r.a.createElement("a",{href:"https://www.purecommercialfinance.co.uk/news/a-brief-history-of-average-mortgage-interest-rates/",target:"_blank",rel:"noopener noreferrer"},"similar to rates around 1980"),"), then the mortgages would total ",g(this.getPropertyTotal(15))," each month, ",g(this.getPropertyTotal(15)-this.getPropertyCurrentTotal())," more that your current repayments. If rates were this high, your monthly income will be nearer to ",g(this.getNetIncomeTotal(15)),".")))}},{key:"render",value:function(){if(this.props.properties.length<1)return null;var e=g(this.getPropertyProperIncome()),t=g(this.getPropertyCurrentIncome());t!==e&&(t="".concat(t," (").concat(e,")"));var a=g(this.getPropertyFullTotal()),n=g(this.getPropertyCurrentTotal());n!==a&&(n="".concat(n," (").concat(a,")"));var o={"Total Mortgage Debt":g(this.getTotalMortgageDebt()),"Mortgage Costs":"".concat(n," per month"),"Post-Mortgage Profit":"".concat(t," per month")};return r.a.createElement(v,{heading:"Summary",keyInfoItems:o},this.renderBlurb())}}]),t}(r.a.Component),N=a(13),C=a(7),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).state=a.getInitialFormState(),a.handleInputChange=a.handleInputChange.bind(Object(C.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(C.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getInitialFormState",value:function(){return{name:"",interestOnly:!1,mortgage:"",baseRate:"",monthsLeft:"",teaserRate:"",rent:"",fee:"",expenses:""}}},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(N.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.addPropertyHandler(this.state),this.setState(this.getInitialFormState())}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"title is-3"},"Add a Property"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},"Property Name")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"name",value:this.state.name,onChange:this.handleInputChange,placeholder:"10 Downing Street",required:!0})),r.a.createElement("p",{className:"help"},"Give this property a label")))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},"Mortgage amount")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"mortgage",value:this.state.mortgage,onChange:this.handleInputChange,type:"number",placeholder:"300000",step:"any",min:"0",required:!0})),r.a.createElement("p",{className:"help"},"The outstanding amount of the loan")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{name:"interestOnly",checked:this.state.interestOnly,onChange:this.handleInputChange,type:"checkbox"})," Interest only"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"monthsLeft",value:this.state.monthsLeft,onChange:this.handleInputChange,type:"number",placeholder:"300",step:"1",min:"0",disabled:this.state.interestOnly,required:!this.state.interestOnly})),r.a.createElement("p",{className:"help"},"Months left on the mortgage")))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},"Rate")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"baseRate",value:this.state.baseRate,onChange:this.handleInputChange,type:"number",placeholder:"4.95",step:"any",required:!0})),r.a.createElement("p",{className:"help"},"The interest rate of the loan (ignoring any teaser rate) %")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"teaserRate",value:this.state.teaserRate,onChange:this.handleInputChange,type:"number",placeholder:"2.19",step:"any"})),r.a.createElement("p",{className:"help"},"Any introductory/teaser rate the loan may have %")))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},"Rent")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"rent",value:this.state.rent,onChange:this.handleInputChange,type:"number",step:"any",placeholder:"1000",id:"rent",required:!0})),r.a.createElement("p",{className:"help"},"Monthly rent")),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"fee",value:this.state.fee,onChange:this.handleInputChange,type:"number",step:"any",placeholder:"12",id:"fee",required:!0})),r.a.createElement("p",{className:"help"},"Letting fee %")))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label is-normal"},r.a.createElement("label",{className:"label"},"Expenses")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",name:"expenses",value:this.state.expenses,onChange:this.handleInputChange,type:"number",step:"any",placeholder:"110",id:"expenses",required:!0})),r.a.createElement("p",{className:"help"},"Monthly expenses such as maintenance and service charge")))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"}),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"button is-primary"},"Add Property")))))))}}]),t}(r.a.Component),w=function(){function e(t){Object(i.a)(this,e),this.amount=t}return Object(u.a)(e,null,[{key:"fromJson",value:function(t){var a=Object.create(e.prototype);return Object.assign(a,t)}}]),e}(),I=function(e){return Math.round(100*(e+Number.EPSILON))/100},j=function(){function e(t,a,n,r,o,l){Object(i.a)(this,e),this.amount=t,this.repayment=a,this.length=n,this.rate=r,this.fees=o,this.teaserRate=l}return Object(u.a)(e,[{key:"calculateTotalCostOfFinance",value:function(){var e=this.fees.reduce((function(e,t){return t.amount+e}),0);return this.repayment?this.calculateYearlyCostOfFinance(this.rate)*this.length+e:this.amount+this.calculateYearlyCostOfFinance(this.rate)*this.length+e}},{key:"calculateYearlyCostOfFinance",value:function(e){return 12*this.calculateMonthlyCostOfFinance(e)}},{key:"calculateMonthlyCostOfFinance",value:function(e){var t=e/12/100;if(!this.repayment)return this.amount*t;var a=12*this.length,n=Math.pow(t+1,a);return this.amount*(t*n/(n-1))}},{key:"totalCostOfFinance",get:function(){return I(this.calculateTotalCostOfFinance())}},{key:"totalOneOffCosts",get:function(){return this.fees.reduce((function(e,t){return t.amount+e}),0)}},{key:"monthlyCostOfFinance",get:function(){return I(this.calculateMonthlyCostOfFinance(this.rate))}},{key:"monthlyTeaserCostOfFinance",get:function(){var e;return I(this.calculateMonthlyCostOfFinance(null!==(e=this.teaserRate)&&void 0!==e?e:this.rate))}},{key:"yearlyCostOfFinance",get:function(){return I(this.calculateYearlyCostOfFinance(this.rate))}},{key:"yearlyTeaserOfFinance",get:function(){var e;return I(this.calculateYearlyCostOfFinance(null!==(e=this.teaserRate)&&void 0!==e?e:this.rate))}}],[{key:"fromJson",value:function(t){var a=Object.create(e.prototype);return Object.assign(a,t,{fees:t.fees.map((function(e){return w.fromJson(e)}))})}}]),e}(),F=function(){function e(t,a){Object(i.a)(this,e),this.amount=t,this.interval=a}return Object(u.a)(e,[{key:"calculateYearlyCost",value:function(){return"yearly"===this.interval?this.amount:12*this.amount}},{key:"calculateMonthlyCost",value:function(){return"monthly"===this.interval?this.amount:this.amount/12}},{key:"monthlyCost",get:function(){return I(this.calculateMonthlyCost())}},{key:"yearlyCost",get:function(){return I(this.calculateYearlyCost())}}],[{key:"fromJson",value:function(t){var a=Object.create(e.prototype);return Object.assign(a,t)}}]),e}(),P=function(){function e(t,a){Object(i.a)(this,e),this.monthlyRent=t,this.lettingFee=a}return Object(u.a)(e,[{key:"monthlyIncome",get:function(){return I(this.monthlyRent-this.monthlyRent*this.lettingFee/100)}}],[{key:"fromJson",value:function(t){var a=Object.create(e.prototype);return Object.assign(a,t)}}]),e}(),M=function(){function e(t,a,n,r){Object(i.a)(this,e),this.name=t,this.finances=a,this.payments=n,this.rentals=r}return Object(u.a)(e,[{key:"calculateMonthlyCost",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.finances.reduce((function(t,a){return(e?a.monthlyTeaserCostOfFinance:a.monthlyCostOfFinance)+t}),0),a=this.payments.reduce((function(e,t){return t.monthlyCost+e}),0);return t+a}},{key:"calculateMonthlyIncome",value:function(){return this.rentals.reduce((function(e,t){return t.monthlyIncome+e}),0)}},{key:"calculateMonthlyProfit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.calculateMonthlyIncome()-this.calculateMonthlyCost(e)}}],[{key:"fromJson",value:function(t){var a=Object.create(e.prototype);return Object.assign(a,t,{finances:t.finances.map((function(e){return j.fromJson(e)})),payments:t.payments.map((function(e){return F.fromJson(e)})),rentals:t.rentals.map((function(e){return P.fromJson(e)}))})}},{key:"reviver",value:function(t,a){return""===t?e.fromJson(a):a}}]),e}();var T=function(){var e=function(e,t){var a=t;localStorage.getItem(e)&&(a=JSON.parse(localStorage.getItem(e)).map((function(e){return void 0!==e.interestOnly&&(alert("".concat(e.name," has been updated. Please double check the details are still correct")),e=function(e){return{name:e.name,finances:[{amount:parseFloat(e.mortgage),repayment:!e.interestOnly,length:parseFloat(e.monthsLeft)/12,rate:parseFloat(e.baseRate),teaserRate:parseFloat(e.teaserRate),fees:[]}],rentals:[{lettingFee:0,monthlyRent:e.income}],payments:[]}}(e)),M.fromJson(e)})));var n=r.a.useState(a),o=Object(c.a)(n,2),l=o[0],s=o[1];return r.a.useEffect((function(){localStorage.setItem(e,JSON.stringify(l))}),[l,e]),[l,s]}("properties",[]),t=Object(c.a)(e,2),a=t[0],n=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stress-test"},r.a.createElement("header",null,r.a.createElement("h1",{className:"title is-1"},"Mortgage Stress Test"),r.a.createElement("p",null,"What would happen if interest and mortgage rates went up?",r.a.createElement("br",null),"What if you couldn't remortgage once your introductory rate ran out?"),r.a.createElement("p",null,"This stress test is provided as a rough guide only. You should not base any decisions solely on it.")),r.a.createElement(E,{properties:a,removePropertyHandler:function(e){var t=Object(s.a)(a);t.splice(e,1),n(t)}}),r.a.createElement(O,{properties:a}),r.a.createElement(k,{addPropertyHandler:function(e){var t=[new j(parseFloat(e.mortgage),!e.interestOnly,parseInt(e.monthsLeft)/12,parseFloat(e.baseRate),[],parseFloat(e.teaserRate))],r=[new F(parseFloat(e.expenses),"monthly")],o=[new P(parseFloat(e.rent),parseFloat(e.fee))],l=new M(e.name,t,r,o);n([].concat(Object(s.a)(a),[l]))}})),r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,"Created by ",r.a.createElement("a",{href:"https://votemike.co.uk"},"Michael Gwynne")),r.a.createElement("p",null,"You may also like ",r.a.createElement("a",{href:"https://votemike.github.io/amortisation-calculator/"},"Amortisation Calculator")))))},R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function S(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(T,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/stress-test",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/stress-test","/service-worker.js");R?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):S(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):S(t,e)}))}}()}},[[14,1,2]]]);
//# sourceMappingURL=main.73ebcd50.chunk.js.map